# oda / general_ledger / GL
# Source: context/sources/oda/domains/general_ledger.yaml
# 80 columns, 180,288,799 rows. General ledger journal entries.
# Maps to stg_oda__gl.
#
GL: General ledger journal entries. Each row is a single GL entry (debit or credit) with account, well, entity, and source module attribution. Highest-volume ODA table (180M+ rows). CDC soft deletes filtered via _meta/op = 'd'.

  # -- Primary Keys --
  ID(txt) #Estuary CDC primary key (composite key hash)
  COMPANYID(txt) #Operating company ID — part of composite key (FK to ODA_COMPANY)
  ACCOUNTID(txt) #GL account ID — part of composite key (FK to ODA_ACCOUNT)
  JOURNALDATEKEY(txt) #Journal date key — part of composite key (YYYYMMDD text)

  # -- GL Identity --
  GLIDENTITY(int) #ODA internal sequence identity for the GL entry
  NID(int) #Numeric identity (ODA internal)
  ORDINAL(int) #Line item sequence within the voucher
  ENTRYGROUP(int) #Entry group number (groups related debits/credits)

  # -- Dates --
  JOURNALDATE(ts) #Journal entry date (when the transaction is recorded)
  ACCRUALDATE(ts) #Accrual period date for financial reporting
  ACCRUALDATEKEY(float) #Date key for accrual date (YYYYMMDD numeric)
  CASHDATE(ts) #Cash date (when cash actually moved)
  CASHDATEKEY(float) #Date key for cash date (YYYYMMDD numeric)

  # -- Descriptive --
  DESCRIPTION(txt) #Journal entry description/memo
  REFERENCE(txt) #Reference number or code (e.g., invoice number, check number)

  # -- Source Module --
  SOURCEMODULE(txt) #Source module code that originated this entry (e.g., AP, AR, JE)
  SOURCEMODULEID(int) #Source module ID (lookup)
  SOURCEMODULECODE(txt) #Source module code (redundant with SOURCEMODULE)
  SOURCEMODULENAME(txt) #Source module display name

  # -- Financial --
  GROSSVALUE(float) #Gross dollar value (100% interest)
  GROSSVOLUME(float) #Gross volume (100% interest)
  NETVALUE(float) #Net dollar value (after interest allocation)
  NETVOLUME(float) #Net volume (after interest allocation)

  # -- Currency --
  CURRENCYID(txt) #Currency ID (NULL defaults to USD in staging)
  CONVERTCURRENCY(bool) #Whether currency conversion is required
  CONVERTCURRENCYTYPEID(int) #Currency conversion type ID
  EXCHANGERATEID(txt) #Exchange rate ID used for conversion
  FLUCTUATIONTYPEID(int) #Currency fluctuation type ID

  # -- Related Entities --
  AFEID(txt) #AFE ID the entry is charged to (FK to ODA_AFE)
  WELLID(txt) #Well ID the entry relates to (FK to ODA_WELL)
  ENTITYID(txt) #Related entity ID (generic)
  ENTITYCOMPANYID(txt) #Entity company ID
  ENTITYOWNERID(txt) #Entity owner ID
  ENTITYPURCHASERID(txt) #Entity purchaser ID
  ENTITYVENDORID(txt) #Entity vendor ID

  # -- Location (entity that bears the cost/revenue) --
  LOCATIONTYPE(txt) #Location entity type (Well, Company, Owner, Vendor, Purchaser)
  LOCATIONCOMPANYID(txt) #Location company ID
  LOCATIONOWNERID(txt) #Location owner ID
  LOCATIONPURCHASERID(txt) #Location purchaser ID
  LOCATIONVENDORID(txt) #Location vendor ID
  LOCATIONWELLID(txt) #Location well ID

  # -- Related Documents --
  VOUCHERID(txt) #Voucher ID linking to posting batch (FK to ODA_VOUCHER_V2)
  APINVOICEID(txt) #Source AP invoice ID (FK to ODA_APINVOICE)
  APCHECKID(txt) #Source AP check ID (FK to ODA_APCHECK)
  ARINVOICEID(txt) #Source AR invoice ID (FK to ODA_ARINVOICE_V2)
  CHECKREVENUEID(txt) #Revenue check ID
  PURCHASERREVENUERECEIPTID(txt) #Purchaser revenue receipt ID

  # -- Deck References --
  PENDINGEXPENSEDECKID(txt) #Pending expense deck ID
  PENDINGEXPENSEDECKSETID(txt) #Pending expense deck set ID
  SOURCEEXPENSEDECKREVISIONID(txt) #Source expense deck revision that generated this entry
  SOURCEREVENUEDECKREVISIONID(txt) #Source revenue deck revision that generated this entry
  SOURCEWELLALLOCATIONDECKID(txt) #Source well allocation deck ID
  SOURCEWELLALLOCATIONDECKREVISIONID(txt) #Source well allocation deck revision ID

  # -- Payment --
  PAYMENTTYPEID(int) #Payment type ID (lookup)
  PAYMENTTYPECODE(txt) #Payment type code (e.g., Check, Wire, ACH)
  MANUALENTRYREFERENCETYPEID(int) #Manual journal entry reference type ID

  # -- Allocation --
  ALLOCATIONPARENTID(txt) #Parent allocation entry ID (if auto-allocated)
  ISALLOCATIONPARENT(bool) #True if this is the parent entry that generates allocations
  ISALLOCATIONGENERATED(bool) #True if this entry was auto-generated by allocation

  # -- Status Flags --
  POSTED(bool) #Whether the entry has been posted
  GENERATEDENTRY(bool) #True if system-generated (not manually entered)
  RECONCILED(bool) #Whether the entry has been reconciled
  RECONCILEDTRIAL(bool) #Whether reconciled in trial balance
  RECONCILEDTYPECODE(txt) #Reconciliation type code
  RECONCILIATIONTYPEID(int) #Reconciliation type ID (FK to ODA_GLRECONCILIATIONTYPE)

  # -- Report Inclusion Flags --
  INCLUDEINACCRUALREPORT(bool) #Whether to include in accrual-basis reports
  INCLUDEINCASHREPORT(bool) #Whether to include in cash-basis reports
  INCLUDEINJOURNALREPORT(bool) #Whether to include in journal reports
  PRESENTINACCRUALBALANCE(bool) #Whether present in accrual balance calculation
  PRESENTINCASHBALANCE(bool) #Whether present in cash balance calculation
  PRESENTINJOURNALBALANCE(bool) #Whether present in journal balance calculation

  # -- Audit/Metadata --
  CREATEDATE(ts) #Record creation timestamp (ODA)
  CREATEEVENTID(txt) #ODA event ID that created this record
  UPDATEDATE(ts) #Record last update timestamp (ODA)
  UPDATEEVENTID(txt) #ODA event ID that last updated this record
  RECORDINSERTDATE(ts) #Estuary CDC insert timestamp
  RECORDUPDATEDATE(ts) #Estuary CDC update timestamp
  _meta/op(txt) #Estuary CDC operation type (c=create, u=update, d=delete). Staging filters d.
  FLOW_PUBLISHED_AT(ts) #Estuary Flow publication timestamp
  FLOW_DOCUMENT(variant) #Full CDC document as JSON (excluded from staging to reduce size)
