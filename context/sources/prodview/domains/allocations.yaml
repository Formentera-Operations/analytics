# Peloton Prodview: Allocations
# Production allocation, disposition, distribution, and balance at monthly/daily granularity
#
# Types: dt=datetime bool=boolean int=integer dbl=double
#   s{N}=string(N) txt{N}=stringlong(N) s32_calc=calculated_string32
#   dbl_m3=m3 dbl_m3_calc=m3(calc) dbl_kPa=kPa dbl_degC=degC
#   dbl_pct=proportion dbl_m3pm3=m3/m3 dbl_kgpm3=kg/m3 dbl_m3pd=m3/day
#   dbl_deg=degrees dbl_kg=kilograms dbl_days=days dbl_day=day dbl_sec=seconds
#   dbl_calc=double(calc) dt_calc=datetime(calc)
#
# OMITTED (on all tables): IDFlowNet sysLock* sysMod* sysCreate*
#   sysTag sysSecurityTyp IDRec IDRecParent *TK columns
#
# Relationships:
#   Allocation chain (planned/actual production allocation):
#   pvUnit 1:many -> pvUnitAllocMonth (via idrec -> idrecparent, must also match idflownet)
#   pvUnitAllocMonth 1:many -> pvUnitAllocMonthDay (via idrec -> idrecparent AND idflownet)
#
#   Distribution chain (downstream product distribution):
#   pvUnit 1:many -> pvUnitDistribMonth (via idrec -> idrecparent, must also match idflownet)
#   pvUnitDistribMonth 1:many -> pvUnitDistribMonthDay (via idrec -> idrecparent AND idflownet)
#
#   Balance rollup:
#   pvUnit 1:1 -> pvUnitBalanceMonthCalc (calculated rollup derived from allocation + distribution; not a raw measurement)
#
# Key patterns:
#   - idrec: universal GUID PK on every ProdView table — required in all joins
#   - idflownet: flow network scope — every parent->child join must match on BOTH idrecparent=idrec AND
#     idflownet. Omitting idflownet causes cross-network data bleed.
#   - idrecparent: FK to parent entity's idrec — must also match idflownet
#   - Two parallel chains: Alloc chain (planned production allocation) and Distrib chain (downstream
#     distribution). These are NOT the same concept — do not mix them.
#   - pvUnitBalanceMonthCalc: a calculated rollup — represents the balance between allocated in and
#     distributed out. Used for balance/imbalance checks, not raw measurement.
#   - Month grain: pvUnitAllocMonth and pvUnitDistribMonth are at calendar-month grain per unit.
#     Day-level tables (pvUnitAllocMonthDay, pvUnitDistribMonthDay) add daily granularity within each month.


# Tables in this domain (column details in tables/ directory):
#   pvUnitBalanceMonthCalc: Monthly Unit Balance +parent
#   pvUnitBalanceMonthDayCalc: Daily Unit Balance +parent
#   pvUnitAllocMonth: Monthly Allocations +parent | Lost Production Due to Downtime
#   pvUnitAllocMonthDay: Daily Allocations +parent | Lost Production Due to Downtime
#   pvUnitAllocWarn: Calculation Warnings +parent | Warnings or errors identified while calculatin...
#   pvUnitDispMonth: Monthly Dispositions +parent
#   pvUnitDispMonthDay: Daily Dispositions +parent
#   pvUnitDistribMonth: Monthly Distributions +parent
#   pvUnitDistribMonthDay: Daily Distributions +parent
#   pvUnitTolOR: Balance Tolerance Exceptions +parent | Overrides the default tolerance specif...
