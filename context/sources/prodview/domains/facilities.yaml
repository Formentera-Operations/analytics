# Peloton Prodview: Facilities
# Multi-unit facility-level reporting, measurement points, production summaries, regulatory
#
# Types: dt=datetime bool=boolean int=integer dbl=double
#   s{N}=string(N) txt{N}=stringlong(N) s32_calc=calculated_string32
#   dbl_m3=m3 dbl_m3_calc=m3(calc) dbl_kPa=kPa dbl_degC=degC
#   dbl_pct=proportion dbl_m3pm3=m3/m3 dbl_kgpm3=kg/m3 dbl_m3pd=m3/day
#   dbl_deg=degrees dbl_kg=kilograms dbl_days=days dbl_day=day dbl_sec=seconds
#   dbl_calc=double(calc) dt_calc=datetime(calc)
#
# OMITTED (on all tables): IDFlowNet sysLock* sysMod* sysCreate*
#   sysTag sysSecurityTyp IDRec IDRecParent *TK columns
#
# Relationships:
#   pvFacility is a SEPARATE ROOT ENTITY — NOT a pvUnit child. Do NOT apply the standard
#   pvUnit → child (idrecparent) join pattern here. pvFacility has its own independent hierarchy.
#
#   pvFacility 1:many -> pvFacilityUnit (BRIDGE: facility.idrec = facilityunit.idrecparent)
#     pvFacilityUnit cross-references pvUnit/pvUnitComp via IDRecUnit (not idrecparent)
#     A facility can contain multiple units; a unit can belong to multiple facilities (many-to-many)
#   pvFacility 1:many -> pvFacilityMeasPt (via idrec = idrecparent AND idflownet)
#   pvFacilityMeasPt 1:many -> pvFacilityMeasPtEntry (via measpt.idrec = entry.idrecparent AND idflownet)
#   pvFacility 1:many -> pvFacilityMonthCalc (via idrec = idrecparent AND idflownet; calc rollup)
#   pvFacility 1:many -> pvFacilityMonthDayCalc (via idrec = idrecparent AND idflownet; calc rollup)
#   pvFacility 1:many -> pvFacilityRatios (via idrec = idrecparent AND idflownet)
#   pvFacility 1:many -> pvFacilityTol (via idrec = idrecparent AND idflownet)
#   pvFacility 1:many -> pvFacilityOtherTag (via idrec = idrecparent AND idflownet)
#   pvFacility 1:many -> pvFacilityRegBody (via idrec = idrecparent AND idflownet)
#   pvFacilityRegBody 1:many -> pvFacilityRegBodyKey (via regbody.idrec = key.idrecparent AND idflownet)
#   pvFacRecDispCalc: no +parent annotation — relationship to pvFacility is system-managed; treat as
#     a standalone daily summary of facility receipts/dispositions, not a direct idrecparent child
#
# Key patterns:
#   - pvFacility.IDPa = EID (primary identifier for joining to well_360)
#   - pvFacilityUnit.IDRecUnit is the FK to pvUnit/pvUnitComp — NOT idrecparent. Use this column
#     to resolve which units or completions belong to a facility.
#   - pvFacilityUnit is a bridge (many-to-many): DtTmStart/DtTmEnd define membership windows;
#     filter DtTmEnd IS NULL (or >= report date) for current facility membership
#   - pvFacilityMonthCalc is the PRIMARY MART TARGET — 83 columns covering facility-level
#     production/injection balance by stream (oil, gas, water, etc.) at monthly grain
#   - pvFacilityMonthDayCalc is the daily equivalent of pvFacilityMonthCalc
#   - pvFacilityMonthCalc and pvFacilityMonthDayCalc are calc rollups — read-only, system-generated;
#     do not join for raw measurements
#   - idflownet: all parent→child joins within the pvFacility hierarchy must also match idflownet


# Tables in this domain (column details in tables/ directory):
#   pvFacility: Facilities | List of injection and production facility groupings.
#   pvFacilityUnit: Facility Units +parent | In the Facility Units table, you can link the comple...
#   pvFacilityOtherTag: Other Reference Tags +parent | Other reference tags. Used to specifiy SCADA, ...
#   pvFacilityMeasPt: Facility Other Meas Points +parent | If you have a separate measurement point...
#   pvFacilityMeasPtEntry: Facility Other MP Entries +parent | In the child table, enter the date and th...
#   pvFacilityMonthCalc: Monthly Production/Injection by Facility +parent | This calculated table show...
#   pvFacilityMonthDayCalc: Daily Production/Injection by Facility +parent | This calculated table shows ...
#   pvFacilityRatios: Facility Ratios +parent | In the Facility Ratios table, you can enter the STV...
#   pvFacilityTol: Facility Tolerance +parent | Overrides the default tolerance specified in 'Ca...
#   pvFacilityRegBody: Facility Regulatory Bodies +parent | The Facility Regulatory Bodies table hol...
#   pvFacilityRegBodyKey: Facility Regulatory Reporting Keys +parent | The Facility Regulatory Reportin...
#   pvFacRecDispCalc: Daily Facility Receipts/Dispositions | This calculated table gives a summary ...
