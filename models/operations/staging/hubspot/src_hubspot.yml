version: 2

sources:
  - name: hubspot
    database: fo_raw_db
    schema: hubspot_raw
    description: >
      HubSpot CRM data for Owner Relationship Management (ORM).
      Ingested via Portable (full snapshots). All business fields stored
      in PROPERTIES VARIANT column as JSON.
    tables:
      - name: companies
        description: Owner legal entities — individuals, LLCs, trusts, corporations
        columns:
          - name: id
            description: Unique company identifier
            data_tests:
              - unique
              - not_null

          - name: properties
            description: VARIANT column containing all HubSpot company properties

          - name: archived
            description: Soft delete flag — true means record is archived

          - name: createdat
            description: Record creation timestamp

          - name: updatedat
            description: Record last update timestamp

          - name: _portable_extracted
            description: Portable extraction timestamp

      - name: contacts
        description: Owner contact persons — primary entity for Owner 360
        columns:
          - name: id
            description: Unique contact identifier
            data_tests:
              - unique
              - not_null

          - name: properties
            description: VARIANT column containing all HubSpot contact properties

          - name: archived
            description: Soft delete flag — true means record is archived

          - name: createdat
            description: Record creation timestamp

          - name: updatedat
            description: Record last update timestamp

          - name: _portable_extracted
            description: Portable extraction timestamp

      - name: companies_property_history
      - name: company_properties
      - name: contacts_property_history
      - name: contact_properties
      - name: emails
      - name: email_events
      - name: engagements
      - name: forms
      - name: meetings
      - name: meeting_contacts
      - name: owners
      - name: teams
      - name: tickets
      - name: users
