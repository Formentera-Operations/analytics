version: 2

models:
  # ==========================================================================
  # stg_wellview__well_tests
  # ==========================================================================
  - name: stg_wellview__well_tests
    description: >
      Well test staging from WellView. One row per well test.
      Test headers with type, dates, zones, and operating conditions.
      Source: WVT_WVWELLTESTTRANS (CALC schema).
    columns:
      - name: well_test_id
        description: "WellView well test GUID (IDREC) — natural key"
        data_tests:
          - unique
          - not_null
      - name: well_id
        description: "Parent well GUID (IDWELL)"
        data_tests:
          - not_null:
              config:
                severity: warn

  # ==========================================================================
  # stg_wellview__well_test_results
  # ==========================================================================
  - name: stg_wellview__well_test_results
    description: >
      Well test result staging from WellView. One row per test result.
      Measured results (rates, pressures, analysis) per test.
      Source: WVT_WVWELLTESTTRANSRESULT (CALC schema).
    columns:
      - name: well_test_result_id
        description: "WellView well test result GUID (IDREC) — natural key"
        data_tests:
          - unique
          - not_null
      - name: well_test_id
        description: "Parent well test GUID (IDRECPARENT)"
        data_tests:
          - not_null:
              config:
                severity: warn

  # ==========================================================================
  # stg_wellview__well_test_flow_periods
  # ==========================================================================
  - name: stg_wellview__well_test_flow_periods
    description: >
      Well test flow period staging from WellView. One row per flow period.
      Individual flow and shut-in periods within a test.
      Source: WVT_WVWELLTESTTRANSFLOWPER (CALC schema).
    columns:
      - name: flow_period_id
        description: "WellView flow period GUID (IDREC) — natural key"
        data_tests:
          - unique
          - not_null
      - name: well_test_id
        description: "Parent well test GUID (IDRECPARENT)"
        data_tests:
          - not_null:
              config:
                severity: warn
